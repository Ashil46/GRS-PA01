# PA01: Comparative Analysis of Processes and Threads
  
Ashil Krishna PS

---

## üìñ Project Overview
This project provides an experimental framework to analyze the performance, scalability, and resource overhead of **Process-based** vs. **Thread-based** concurrency.

By pinning execution to a **single CPU core**, the experiments isolate the operating system's overhead (context switching, scheduling, memory management) from hardware parallelism. The system is stressed using three custom-designed synthetic workloads:
1.  **CPU-Bound:** Heavy floating-point arithmetic.
2.  **Memory-Bound:** Large buffer allocation with stride-based access.
3.  **I/O-Bound:** Synchronous random disk writes.

---

## üìÇ Repository Structure

### **Source Code**
* `MT25065_Part_A_Program_A.c`: **Process Manager**. Uses `fork()` to spawn independent child processes.
* `MT25065_Part_A_Program_B.c`: **Thread Manager**. Uses `pthread_create()` to spawn threads sharing a single address space.
* `MT25065_Part_B_workers.c`: **Worker Logic**. Contains the implementation of the stress-test functions (`cpu_worker`, `mem_worker`, `io_worker`).
* `MT25065_Part_B_workers.h`: Header file exposing the worker functions.

### **Automation & Tools**
* `Makefile`: Automates compilation with `gcc -O2` optimization and `-pthread` linking.
* `MT25065_Part_C_shell.sh`: **Baseline Script**. Runs experiments with fixed concurrency (Count=2) on Core 0.
* `MT25065_Part_D_shell.sh`: **Scaling Script**. Runs experiments scaling from 2 to 8 workers on Core 0.
* `plot_results.py`: **Visualization**. Python script using `matplotlib` to generate analysis graphs from CSV logs.

### **Data & Documentation**
* `README.md`: This documentation.
* `MT25065_Report.pdf`: Final comprehensive analysis report.
* `*.csv`: Raw performance metrics generated by the shell scripts.
* `*.png`: Visualization plots generated by the Python script.

---

## üõ†Ô∏è Worker Implementation Details
To ensure accurate benchmarking, the workers are implemented with specific system-level considerations:

| Worker Type | Implementation Detail | OS Subsystem Stressed |
| :--- | :--- | :--- |
| **CPU** | Tight loop calculating `sqrt()`, `sin()`, `cos()`. | **ALU & FPU**. Tests scheduler time-slicing efficiency. |
| **Memory** | Allocates **220MB** buffer. Accesses data with a **4KB stride** (page size) to force TLB misses. | **Virtual Memory Manager**. Tests page table efficiency and bandwidth. |
| **I/O** | Performs `lseek()` and `write()` using the **`O_SYNC` flag**. | **Disk Controller**. Forces data flush to physical disk, bypassing the Page Cache. |

---

## ‚öôÔ∏è Build Instructions
The project uses a `Makefile` for clean, one-step compilation.

**Prerequisites:** `gcc`, `make`

```bash
# Compile both programs
make

# Output binaries:
# - program_a (Process-based)
# - program_b (Thread-based)

To remove binaries and temporary object files:
Bash

make clean

üöÄ Execution Guide
1. Manual Execution

You can run individual test cases manually to verify specific behaviors. Usage: ./program_<type> <worker> <count>
Bash

# Run 2 processes performing CPU tasks
./program_a cpu 2

# Run 5 threads performing Memory tasks
./program_b mem 5

2. Automated Experiments (Required for Report)

The shell scripts automate the data collection using taskset -c 0 (CPU Pinning), top (CPU/Mem metrics), and iostat (Disk metrics).

Part C: Baseline (Count=2)
Bash

chmod +x MT25065_Part_C_shell.sh
./MT25065_Part_C_shell.sh

    Output: MT25065_Part_C_CSV.csv

Part D: Scalability (Count=2..8)
Bash

chmod +x MT25065_Part_D_shell.sh
./MT25065_Part_D_shell.sh

    Output: MT25065_Part_D_CSV.csv

    Note: This takes several minutes to complete as it runs multiple permutations.
```
üìä Visualization

Once the CSV files are generated, use the Python script to create the graphs used in the report.

Prerequisites: python3, pandas, matplotlib
Bash

python3 plot_results.py

Generated Plots:

    Baseline Comparisons (Part C): CPU, Memory, I/O, and Time bar charts.

    Scaling Analysis (Part D):

        PartD_06_CPU_Time_Scaling.png: Shows linear serialization of CPU tasks.

        PartD_07_Mem_Scaling.png: The "Crash" Graph showing thread memory exhaustion.

        PartD_08_IO_Time_Scaling.png: Shows non-linear disk contention.
